<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
        <title>Practical</title>

        <meta name="keywords" content="practical" />
        <meta name="description" content="practical" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />

    </head>
    <body>


        <div class="container">

            <h1>JS DOM Sample</h1>

            <form class="row">

                <label class="col-xs-12">
                    Character count

                    <textarea name="text" maxlength="100" class="count-chars form-control" rows="5"></textarea>

                    <span aria-live="polite" id="count">Remaining Chars: <span></span></span>
                </label>

            </form>
        </div>

        <script>

            /**
             * 1...
             */
            /*(function(window, undefined) {


                var textArea    = window.document.querySelector('.count-chars'),
                    countLabel  = window.document.getElementById('count'),
                    countSpan   = countLabel.querySelector('span'),
                    maxLength   = parseInt(textArea.getAttribute('maxlength'));

                var keyEvent = function(event) {

                    var text = event.target.value;

                    countSpan.innerText = maxLength - text.length;
                };

                textArea.addEventListener('keydown', keyEvent, false);
                textArea.addEventListener('keyup', keyEvent, false);

                countSpan.innerText = maxLength;

            })(this);*/


            /**
             * 2...
             */
            (function(window, undefined) {

                var textArea    = window.document.querySelector('.count-chars'),
                    countLabel  = window.document.getElementById('count'),
                    countSpan   = countLabel.querySelector('span'),
                    maxLength   = parseInt(textArea.getAttribute('maxlength')),
                    alertClass  = 'text-danger';


                go();


                /**
                 * Start everything
                 */
                function go() {

                    textArea.addEventListener('keydown', keyEvent, false);
                    textArea.addEventListener('keyup', keyEvent, false);

                    countSpan.innerText = maxLength;

                    updateClass();
                }


                /**
                 * Key event
                 */
                function keyEvent(event) {

                    var text = event.target.value;

                    countSpan.innerText = maxLength - text.length;

                    updateClass(text.length);
                }


                /**
                 * Update CSS class
                 */
                function updateClass(textLength) {

                    if (!textLength || textLength <= 5) {

                        countLabel.className = alertClass;

                    } else {

                        countLabel.className = countLabel.className.replace(alertClass,'');
                    }
                }

            })(this);

        </script>

    </body>
</html>